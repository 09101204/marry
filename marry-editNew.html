<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>婚礼纪</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/global.css">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/module.css">
    <link rel="stylesheet" type="text/css" href="css/status.css">
    <script src="js/sea-modules/seajs/1.3.1/sea.js" type="text/javascript"></script>
    <script src="http://libs.baidu.com/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/application.js"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/dist/html5shiv.js"></script>
    <![endif]-->

    <script type="text/javascript">
            seajs.config({
                alias: {
                    "$": "gallery/jquery.js"
                }
            });
    </script>
    <style type="text/css">
        #secondStep,#thirdStep{
            display: none;
        }
    </style>
</head>
<body>
<div id="wrapper">
<nav id="topBar" class="ui-top-nav"></nav>
<script type="text/javascript">
    seajs.use(['marry/application', '$'], function(App, $) {
        var template=new App.template();
        template.loadHeader("#indexUrl");
    });
</script>
<section id="container" class="container">
    <form action="" enctype="multipart/form-data" method="post" id="editNew">
    <div class="fn-hide">
        <input type="file" id="hiddenFile" multiple/>
    </div>
    <section id="firstStep">
        <div class="add-panel ui-shadow first-step" id="">
            <header>
                <div class="icons">
                    <i class="icon icon-active"></i>
                    <i class="dot"></i>
                    <i class="icon"></i>
                    <i class="dot"></i>
                    <i class="icon"></i>
                </div>
                <div class="step"> 1</div>
                <span id="choseNum" class="num-txt"><span id="imgNum">0</span>/20</span>
                <div class="upload-panel">
                    <span class="ui-btn middle ui-btn-green fn-right" id="uploadBtn">
                        <span class="ui-btn-text"> 上传照片 </span>
                    </span>
                    <span class="txt">按“ctrl”可多选</span>
                </div>
            </header>
            <section id="addList" class="add-list clearfix">
            <!--<section id="addList" class="add-list clearfix upload-img-panel ui-scrollbar">-->
                <div class="note"></div>
            </section>
            <div class="spacer" id="dragdrop-spacer"></div>
            <div class="spacer-hor" id="dragdrop-spacer-hor"></div>
            <footer class="foot-txt">
                拖动照片可排序，第一张照片默认显示为封面
            </footer>
        </div>
        <div class="add-btn">
            <div class="ui-btn gray large" id="index1" data-next="false">
                <span class="ui-btn-text"> 下一步 </span>
            </div>
        </div>
    </section>
    <section id="secondStep">
        <div class="add-panel step-second ui-shadow" id="">
            <header>
                <div class="icons">
                    <i class="icon "></i>
                    <i class="dot"></i>
                    <i class="icon icon-active"></i>
                    <i class="dot"></i>
                    <i class="icon"></i>
                </div>
                <div class="step">
                    <span>2</span>
                </div>
            </header>
            <section class="add-form">
                <h3 class="form-title">给画卷取个名字吧</h3>
                <input type="text" class="ui-dialog-input" name="" id="montageName" required="required"/>
                <h3 class="form-title">当然，还要有些描述</h3>
                <textarea class="ui-dialog-textarea" id="montageDescription" required="required"></textarea>
            </section>
        </div>
        <div class="add-btn">
            <div class="ui-btn ui-btn-green large " id="2to1">
                <span class="ui-btn-text"> 上一步 </span>
            </div>
            <div href="#" class="ui-btn gray large nextBtn" id="2to3">
                <span class="ui-btn-text"> 下一步 </span>
            </div>
        </div>
    </section>
    <section id="thirdStep">
        <div class="add-panel ui-shadow" id="">
            <header>
                <div class="icons">
                    <i class="icon "></i>
                    <i class="dot"></i>
                    <i class="icon"></i>
                    <i class="dot"></i>
                    <i class="icon icon-active"></i>
                </div>
                <div class="step">
                    <span>3</span>
                </div>
            </header>
            <section id="" class="add-list third-step clearfix">
                <div class="slidee ui-scrollbar">
                    <form class="clearfix" action="xx" method="post">
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article><article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                        <article class="note add-list-item"> <div class="cover"><img src="assets/test/1.jpg" alt="xsf"/></div> <div class="close">X</div> <div class="number">1</div> <div> <input type="text" name="" class="description"/> </div> </article>
                    </form>
                </div>
            </section>
        </div>
        <div class="add-btn">
            <a class="ui-btn middle ui-btn-green"> <span class="ui-btn-text"> 上一步 </span> </a>
            <a class="ui-btn middle ui-btn-green ml30"> <span class="ui-btn-text"> 下一步 </span> </a>
        </div>
    </section>
    </form>
</section>
    <footer class="ui-footer ui-shadow-top" id="foot"></footer>
    <script type="text/javascript">
        seajs.use(['marry/application', '$'], function(App, $) {
            var template=new App.template();
            template.loadFoot();
        });
    </script>
</div>
<script type="text/javascript">
/*    seajs.use(['marry/application'], function(App) {
        var notes=new App.Note({
            element:".note"
        });
        notes.drag();

    });*/
    var params = {
        fileInput: $("#hiddenFile").get(0),
        dragDrop: $("#addList").get(0),
        upButton: $("#fileSubmit").get(0),
        url: $("#uploadForm").attr("action")
    };
    var imgUploader = $.extend(ImgUpload, params);
    imgUploader.init();
    $("#uploadBtn").click(function(){
        $("#hiddenFile").click();
    });

    var stepNav={
        init:function(){
            var self=this;
            $("#index1").on("click",function(){
                alert("1"+$(this).attr("data-next"));
                if($(this).attr("data-next")==="true"){
                    self.goSecond();
                }else{
                    alert("no");
                }
            });
        },
        goSecond:function(){
            var self=this;
            $("#firstStep").hide();
            $("#secondStep").show();
            $("#2to1").on("click",function(){
                $("#firstStep").show();
                $("#secondStep").hide();
            });
            $("#2to3").on("click",function(){
                self.validate();
                if(self.validate()!==true) return;
                $("#secondStep").hide();
                $("#thirdStep").show();

            });

        },
        validate:function(){
            console.log("validate!!!");
           var name= $("montageName").val(),description=$("montageDescription").val();
            if(name===""||description===""){
                alert("no")
                return false;
            }
        }
    }
    stepNav.init();
    seajs.use(['arale/validator/0.9.2/validator', '$'], function(Validator, $) {
        $(function() {
            var validator = new Validator({
                element: '#editNew'
            });

            validator.addItem({
                element: '[id=montageName]',
                required: true
            }).addItem({
                        element: '[id=montageDescription]',
                        required: true
                    })
        });
    });
</script>
</body>
</html>
